<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="WilliamApp.Views.LoginPage"
             Title="Iniciar sesión"
             BackgroundColor="White">

    <Grid x:Name="RootGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Contenido principal -->
        <VerticalStackLayout Grid.Row="1" Spacing="10" Padding="0,10">
            <Image Source="william_logo2.png" HorizontalOptions="Center" HeightRequest="150" WidthRequest="150"/>
            <Label Text="Bienvenido" TextColor="#101010" FontSize="Title" HorizontalOptions="Center" FontAttributes="Bold"/>

            <StackLayout Orientation="Vertical" Spacing="5" HorizontalOptions="Fill" Padding="30, 20, 30, 10">
                <Label Text="Email" />
                <Entry Text="{Binding Email}" Keyboard="Email" />

                <Label Text="Contraseña" />
                <Entry Text="{Binding Password}" IsPassword="True"/>
            </StackLayout>

            <StackLayout Padding="30, 10, 30, 30">
                <Button Text="Iniciar sesión" HeightRequest="50" Margin="0,10" FontSize="Medium" Command="{Binding LoginCommand}"/>
                <Button Text="Registrarse" HeightRequest="50" Margin="0,10" FontSize="Medium" Command="{Binding IrARegistroCommand}"/>
                <Label Text="Olvidaste tu contraseña?" HorizontalOptions="Center"/>
            </StackLayout>
        </VerticalStackLayout>

        <!-- Overlay de carga (top layer) -->
        <Grid IsVisible="{Binding IsBusy}">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="12">
                <ActivityIndicator IsRunning="{Binding IsBusy}" Color="#FFD600" HeightRequest="48" WidthRequest="48"/>
                <Label Text="Iniciando sesión..." TextColor="Black" HorizontalTextAlignment="Center" FontAttributes="Bold"/>
            </VerticalStackLayout>
        </Grid>
    </Grid>
</ContentPage>